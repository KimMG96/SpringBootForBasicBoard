<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.toyproject.springbootforbasicboard.auth.service.mapper.AuthMapper">

    <select id="selectAllUsers" resultType="java.util.Map">
        <![CDATA[
        SELECT *
        FROM userInfo
        ]]>
    </select>

    <select id="selectUserCountByUserId" parameterType="String" resultType="int">
        <![CDATA[
        SELECT COUNT(*)
        FROM userInfo
        WHERE uiId=#{uiId}
        ]]>
    </select>


    <insert id="insertUserInfo" parameterMap="java.util.Map">
        <![CDATA[
        INSERT INTO userInfo
            (uiId, uiPwd, uiName, uiPhone, uiEmail, uiCrtDate, uiState, uiAuth)
        VALUES
            (#{uiId}, #{uiPwd}, #{uiName}, #{uiPhone},#{uiCrtDate}, 1, 1)
        ]]>
        <selectKey resultType="int" order="AFTER" keyProperty="uiIdx">
            SELECT LAST_INSERT_ID()
        </selectKey>
    </insert>

    <insert id="insertUseHistoryInfo" parameterMap="java.util.Map">
        <![CDATA[
        INSERT INTO userHistory
            (uhCrtDate, uiIdx, uhDetail)
        VALUES
            (#{uhCrtDate}, #{uiIdx}, #{uhDetail})
        ]]>
    </insert>




</mapper>